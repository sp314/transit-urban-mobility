plot(st_centroid(st_geometry(dc_acs_tracts), of_largest_polygon), add=TRUE, col="blue")
travel_time_sf %>% filter(year == 2017, month == 1, week == 3) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time)) +
geom_sf()
travel_time_sf %>% filter(year == 2017, month == 1, week == 3) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time)) +
geom_sf() +
theme_map +
scale_fill_viridis_c(direction = -1)
travel_time_sf %>% filter(year == 2017, month == 1, week == 3) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time)) +
theme_map +
scale_fill_viridis_c(direction = -1)
travel_time_sf %>% filter(year == 2017, month == 1, week == 3) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time)) +
geom_sf(centroids)
travel_time_sf %>% filter(year == 2017, month == 1, week == 3) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time)) +
geom_sf(centroids) +
theme_map +
scale_fill_viridis_c(direction = -1)
travel_time_sf %>% filter(year == 2017, month == 1, week == 3) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time)) +
geom_sf(data = centroids) +
theme_map +
scale_fill_viridis_c(direction = -1)
centroids
st_centroid(travel_time_sf)
st_centroid(st_geometry(dc_acs_tracts), of_largest_polygon)
centroids <- st_centroid(st_geometry(dc_acs_tracts), of_largest_polygon)
centroids
centroids <- cbind(st_coordinates(st_centroid(dc_acs_tracts)))
centroids
centroids <- cbind(st_centroid(st_geometry(dc_acs_tracts)))
centroids
centroids <- cbind(st_centroid(st_geometry(dc_acs_tracts), of_largest_polygon))
centroids
centroids <- st_centroid(st_geometry(dc_acs_tracts), of_largest_polygon)
centroids
plot(dc_acs_tracts, border="grey")
plot(st_geometry(dc_acs_tracts), border="grey")
plot(st_geometry(dc_acs_tracts), border="grey")
plot(centroids, add=TRUE, col="blue", cex = 0.5)
plot(st_geometry(dc_acs_tracts), border="grey")
plot(centroids, add=TRUE, col="blue", cex = 0.5, lwd = 0.2)
plot(st_geometry(dc_acs_tracts), border="grey")
plot(centroids, add=TRUE, col="blue", cex = 0.3)
travel_time_sf %>% filter(year == 2017, month == 1, week == 3) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time)) +
geom_sf(data = centroids) +
theme_map +
scale_fill_viridis_c(direction = -1)
travel_time_sf %>% filter(year == 2017, month == 1, week == 4) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time)) +
geom_sf(data = dc_roads, color = "white") +
geom_sf(data = metro_line, color = "black") +
theme_map +
scale_fill_viridis_c(direction = -1)
travel_time_sf %>% filter(year == 2017, month == 1, week == 3) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time)) +
geom_sf(data = centroids, mapping = aes(color = "white"), alpha = 0.5) +
theme_map +
scale_fill_viridis_c(direction = -1)
travel_time_sf %>% filter(year == 2017, month == 1, week == 3) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time)) +
geom_sf(data = centroids, fill = "white", alpha = 0.5) +
theme_map +
scale_fill_viridis_c(direction = -1)
travel_time_sf %>% filter(year == 2017, month == 1, week == 3) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time)) +
geom_sf(data = centroids, alpha = 0.5, fill = "white") +
theme_map +
scale_fill_viridis_c(direction = -1)
travel_time_sf %>% filter(year == 2017, month == 1, week == 3) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time)) +
geom_sf(data = centroids, alpha = 0.5, color = "white") +
theme_map +
scale_fill_viridis_c(direction = -1)
travel_time_sf %>% filter(year == 2017, month == 1, week == 3) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time)) +
geom_sf(data = centroids, alpha = 0.5, color = "white", size = 0.5) +
theme_map +
scale_fill_viridis_c(direction = -1)
travel_time_sf %>% filter(year == 2017, month == 1, week == 4) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time)) +
geom_sf(data = dc_roads, color = "white") +
geom_sf(data = metro_line, color = "black") +
theme_map +
scale_fill_viridis_c(direction = -1)
travel_time_sf %>% filter(year == 2017, month == 1, week == 4) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time)) +
geom_sf(data = dc_roads, color = "white", size = 0.5) +
geom_sf(data = metro_line, color = "black", size = 0.5) +
theme_map +
scale_fill_viridis_c(direction = -1)
travel_time_sf %>% filter(year == 2017, month == 1, week == 3) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time), lwd=0) +
geom_sf(data = centroids, alpha = 0.5, color = "white", size = 0.5) +
theme_map +
scale_fill_viridis_c(direction = -1)
travel_time_sf %>% filter(year == 2017, month == 1, week == 3) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time), lwd=0.1) +
geom_sf(data = centroids, alpha = 0.5, color = "white", size = 0.5) +
theme_map +
scale_fill_viridis_c(direction = -1)
travel_time_sf %>% filter(year == 2017, month == 1, week == 3) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time), lwd=0.2) +
geom_sf(data = centroids, alpha = 0.5, color = "white", size = 0.5) +
theme_map +
scale_fill_viridis_c(direction = -1)
travel_time_sf %>% filter(year == 2017, month == 1, week == 4) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time)) +
geom_sf(data = dc_roads, color = "white", lwd=0.5) +
geom_sf(data = metro_line, color = "black", lwd=0.5) +
theme_map +
scale_fill_viridis_c(direction = -1)
travel_time_sf %>% filter(year == 2017, month == 1, week == 4) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time), lwd=0.2) +
geom_sf(data = dc_roads, color = "white", lwd=0.2) +
geom_sf(data = metro_line, color = "black", lwd=0.2) +
theme_map +
scale_fill_viridis_c(direction = -1)
travel_time_sf %>% filter(year == 2017, month == 1, week == 3) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time), lwd=0.2) +
geom_sf(data = centroids, alpha = 0.5, color = "white", size = 0.5) +
theme_map +
scale_fill_viridis_c(direction = -1)
dc_acs_tracts
dc_acs_tracts
centroids
centroids %>% View()
centroids[,1] %>% View()
centroids[1,] %>% View()
centroids %>% View()
centroids[1]
centroids[2]
centroids <- dc_acs_tracts %>%
st_centroid()
centroids
centroids <- dc_acs_tracts %>%
st_centroid() %>% select(GEOID)
centroids
centroids <- dc_acs_tracts %>%
st_centroid() %>%
select(GEOID) %>%
rename('centroid' = geometry)
centroids
centroids <- dc_acs_tracts %>%
st_centroid() %>%
select(GEOID) %>%
rename('centroid' = geometry)
centroids <- dc_acs_tracts %>%
st_centroid() %>%
select(GEOID)
centroids <- dc_acs_tracts %>%
st_centroid()
centroids
library(sf)
library(tigris)
library(tidyverse)
#tigris package - contains roads for DC
options(tigris_class="sf")
load("data/travel_times_census_join.RData")
load("data/dc_acs_tracts.RData")
load("data/metro_lines.RData")
load("data/dc_roads.RData")
theme_map <- theme_void()
library(sf)
library(tigris)
library(tidyverse)
#tigris package - contains roads for DC
options(tigris_class="sf")
load("data/travel_times_census_join.RData")
load("data/dc_acs_tracts.RData")
load("data/metro_lines.RData")
load("data/dc_roads.RData")
theme_map <- theme_void()
centroids <- dc_acs_tracts %>%
st_centroid() %>%
selec(GEOID) %>%
rename('centroid' = geometry)
centroids <- dc_acs_tracts %>%
st_centroid() %>%
select(GEOID) %>%
rename('centroid' = geometry)
centroids
library(tidyverse)
library(sf)
library(rgdal)
library(tigris)
library(spdep)
#tigris package - contains roads for DC
options(tigris_class="sf")
load("data/travel_times_census_join.RData")
load("data/dc_acs_tracts.RData")
load("data/metro_lines.RData")
load("data/dc_roads.RData")
theme_map <- theme_void()
centroids <- st_centroid(st_geometry(dc_acs_tracts), of_largest_polygon)
centroids
centroids <- st_centroid(dc_acs_tracts, of_largest_polygon)
centroids
dc_acs_tracts$centroids = st_centroid(dc_acs_tracts, of_largest_polygon)
dc_acs_tracts$centroids = st_centroid(st_geometry(dc_acs_tracts), of_largest_polygon)
dc_acs_tracts
plot(st_geometry(dc_acs_tracts), border="grey")
plot(st_geometry(dc_acs_tracts), border="grey")
library(tidyverse)
library(sf)
library(rgdal)
library(tigris)
library(spdep)
#tigris package - contains roads for DC
options(tigris_class="sf")
load("data/travel_times_census_join.RData")
load("data/dc_acs_tracts.RData")
load("data/metro_lines.RData")
load("data/dc_roads.RData")
theme_map <- theme_void()
dc_acs_tracts$centroids = st_centroid(st_geometry(dc_acs_tracts), of_largest_polygon)
plot(st_geometry(dc_acs_tracts), border="grey")
plot(dc_acs_tracts$centroids, add=TRUE, col="blue", cex = 0.3)
dc_acs_tracts
travel_time_sf <- left_join(x = travel_times_census_join, y = dc_acs_tracts, by = "GEOID") %>%
st_as_sf() %>%
st_transform(crs = 102285)
travel_time_sf
travel_time_sf %>% filter(year == 2017, month == 1, week == 3) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time), lwd=0.2) +
geom_sf(centroids, alpha = 0.5, color = "white", size = 0.5) +
theme_map +
scale_fill_viridis_c(direction = -1)
travel_time_sf %>% filter(year == 2017, month == 1, week == 3) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time), lwd=0.2) +
geom_sf(.$centroids, alpha = 0.5, color = "white", size = 0.5) +
theme_map +
scale_fill_viridis_c(direction = -1)
travel_time_sf %>% filter(year == 2017, month == 1, week == 3) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time), lwd=0.2) +
geom_sf(mapping = aes(centroids), alpha = 0.5, color = "white", size = 0.5) +
theme_map +
scale_fill_viridis_c(direction = -1)
travel_time_sf %>% filter(year == 2017, month == 1, week == 3) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time), lwd=0.2) +
theme_map +
scale_fill_viridis_c(direction = -1)
travel_time_sf %>% filter(year == 2017, month == 1, week == 3) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time), lwd=0.2) +
geom_sf(data = centroids) +
theme_map +
scale_fill_viridis_c(direction = -1)
travel_time_sf %>% filter(year == 2017, month == 1, week == 3) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time), lwd=0.2) +
geom_sf(data = .["centroids"]) +
theme_map +
scale_fill_viridis_c(direction = -1)
travel_time_sf %>% filter(year == 2017, month == 1, week == 3) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time), lwd=0.2) +
geom_sf(data = .) +
theme_map +
scale_fill_viridis_c(direction = -1)
travel_time_sf %>% filter(year == 2017, month == 1, week == 3)
travel_time_sf %>% filter(year == 2017, month == 1, week == 3) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time), lwd=0.2) +
geom_sf("centroids") +
theme_map +
scale_fill_viridis_c(direction = -1)
travel_time_sf %>% filter(year == 2017, month == 1, week == 3) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time), lwd=0.2) +
geom_sf(mapping = aes("centroids")) +
theme_map +
scale_fill_viridis_c(direction = -1)
travel_time_sf %>% filter(year == 2017, month == 1, week == 3) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time), lwd=0.2) +
geom_sf(data = travel_time_sf$centroids) +
theme_map +
scale_fill_viridis_c(direction = -1)
travel_time_sf %>% filter(year == 2017, month == 1, week == 3) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time), lwd=0.2) +
geom_sf(data = travel_time_sf$centroids, cex = 0.3) +
theme_map +
scale_fill_viridis_c(direction = -1)
travel_time_sf %>% filter(year == 2017, month == 1, week == 3) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time), lwd=0.2) +
geom_sf(data = travel_time_sf$centroids, cex = 0.2) +
theme_map +
scale_fill_viridis_c(direction = -1)
travel_time_sf %>% filter(year == 2017, month == 1, week == 3) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time), lwd=0.2) +
geom_sf(data = travel_time_sf$centroids, cex = 0.2, pch = 2) +
theme_map +
scale_fill_viridis_c(direction = -1)
travel_time_sf %>% filter(year == 2017, month == 1, week == 3) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time), lwd=0.2) +
geom_sf(data = travel_time_sf$centroids, cex = 0.2, pch = 1) +
theme_map +
scale_fill_viridis_c(direction = -1)
travel_time_sf %>% filter(year == 2017, month == 1, week == 3) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time), lwd=0.2) +
geom_sf(data = travel_time_sf$centroids, cex = 0.2, pch = 10) +
theme_map +
scale_fill_viridis_c(direction = -1)
travel_time_sf %>% filter(year == 2017, month == 1, week == 3) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time), lwd=0.2) +
geom_sf(data = travel_time_sf$centroids, cex = 0.2, pch = 4) +
theme_map +
scale_fill_viridis_c(direction = -1)
travel_time_sf %>% filter(year == 2017, month == 1, week == 3) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time), lwd=0.2) +
geom_sf(data = travel_time_sf$centroids, cex = 0.2, shape = 4) +
theme_map +
scale_fill_viridis_c(direction = -1)
travel_time_sf %>% filter(year == 2017, month == 1, week == 3) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time), lwd=0.2) +
geom_sf(data = travel_time_sf$centroids, cex = 0.2, shape = "f") +
theme_map +
scale_fill_viridis_c(direction = -1)
travel_time_sf %>% filter(year == 2017, month == 1, week == 3) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time), lwd=0.2) +
geom_sf(data = travel_time_sf$centroids, cex = 1, shape = "f") +
theme_map +
scale_fill_viridis_c(direction = -1)
travel_time_sf %>% filter(year == 2017, month == 1, week == 3) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time), lwd=0.2) +
geom_sf(data = travel_time_sf$centroids, cex = 1, pch = 3) +
theme_map +
scale_fill_viridis_c(direction = -1)
travel_time_sf %>% filter(year == 2017, month == 1, week == 3) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time), lwd=0.2) +
geom_sf(data = travel_time_sf$centroids, cex = 1, pch = 4) +
theme_map +
scale_fill_viridis_c(direction = -1)
travel_time_sf %>% filter(year == 2017, month == 1, week == 3) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time), lwd=0.2) +
geom_sf(data = travel_time_sf$centroids, cex = 0.2, pch = 4) +
theme_map +
scale_fill_viridis_c(direction = -1)
travel_time_sf %>% filter(year == 2017, month == 1, week == 3) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time), lwd=0.2) +
geom_sf(data = travel_time_sf$centroids, cex = 0.5, pch = 4) +
theme_map +
scale_fill_viridis_c(direction = -1)
travel_time_sf %>% filter(year == 2017, month == 1, week == 3) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time), lwd=0.2) +
geom_sf(data = travel_time_sf$centroids, cex = 0.5) +
theme_map +
scale_fill_viridis_c(direction = -1)
travel_time_sf %>% filter(year == 2017, month == 1, week == 4) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time), lwd=0.2) +
geom_sf(data = dc_roads, color = "white", lwd=0.2) +
geom_sf(data = metro_line, color = "black", lwd=0.2) +
theme_map +
scale_fill_viridis_c(direction = -1)
travel_time_sf %>% filter(year == 2017, month == 1, week == 3) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time), lwd=0.2) +
geom_sf(data = travel_time_sf$centroids, cex = 0.5) +
theme_map +
scale_fill_viridis_c(direction = -1)
travel_time_sf %>% filter(year == 2017, month == 1, week == 4) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time), lwd=0.2) +
geom_sf(data = dc_roads, color = "white", lwd=0.2) +
geom_sf(data = metro_line, color = "black", lwd=0.2) +
theme_map +
scale_fill_viridis_c(direction = -1)
travel_time_sf %>% filter(year == 2017, month == 1, week == 3) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time), lwd=0.2) +
geom_sf(data = travel_time_sf$centroids, cex = 0.5) +
scale_fill_viridis_c(direction = -1)
scale_fill_viridis_c(direction = -1)
travel_time_sf %>% filter(year == 2017, month == 1, week == 4) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time), lwd=0.2) +
geom_sf(data = dc_roads, color = "white", lwd=0.2) +
geom_sf(data = metro_line, color = "black", lwd=0.2) +
theme_map +
coord_sf(xlim = c(-77.4, -76.7), ylim = c(38.70, 39.10), expand = FALSE) +
scale_fill_viridis_c(direction = -1)
travel_time_sf %>% filter(year == 2017, month == 1, week == 3) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time), lwd=0.2) +
geom_sf(data = travel_time_sf$centroids, cex = 0.5) +
scale_fill_viridis_c(direction = -1)
coord_sf(xlim = c(-77.4, -76.7), ylim = c(38.70, 39.10) +
scale_fill_viridis_c(direction = -1)
scale_fill_viridis_c(direction = -1)
travel_time_sf %>% filter(year == 2017, month == 1, week == 4) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time), lwd=0.2) +
geom_sf(data = dc_roads, color = "white", lwd=0.2) +
geom_sf(data = metro_line, color = "black", lwd=0.2) +
theme_map +
coord_sf(xlim = c(-77.4, -76.7), ylim = c(38.70, 39.10)) +
scale_fill_viridis_c(direction = -1)
travel_time_sf %>% filter(year == 2017, month == 1, week == 4) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time), lwd=0.2) +
geom_sf(data = dc_roads, color = "white", lwd=0.2) +
geom_sf(data = metro_line, color = "black", lwd=0.2) +
theme_map +
coord_sf(xlim = c(-77.4, -76.7), ylim = c(38.7, 39.1)) +
scale_fill_viridis_c(direction = -1)
coord_sf(dc_acs_tracts)
st_bbox(dc_acs_tracts)
travel_time_sf %>% filter(year == 2017, month == 1, week == 4) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time), lwd=0.2) +
geom_sf(data = dc_roads, color = "white", lwd=0.2) +
geom_sf(data = metro_line, color = "black", lwd=0.2) +
theme_map +
coord_sf(st_bbox(dc_acs_tracts)) +
scale_fill_viridis_c(direction = -1)
travel_time_sf %>% filter(year == 2017, month == 1, week == 4) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time), lwd=0.2) +
geom_sf(data = dc_roads, color = "white", lwd=0.2) +
geom_sf(data = metro_line, color = "black", lwd=0.2) +
theme_map +
st_bbox(dc_acs_tracts) +
scale_fill_viridis_c(direction = -1)
st_bbox(dc_roads) <- st_bbox(dc_acs_tracts)
st_bbox(dc_roads) <- st_bbox(dc_acs_tracts)
st_bbox(dc_roads)
map_lims <- st_bbox(dc_acs_tracts)
map_lims
travel_time_sf %>% filter(year == 2017, month == 1, week == 4) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time), lwd=0.2) +
geom_sf(data = dc_roads, color = "white", lwd=0.2) +
geom_sf(data = metro_line, color = "black", lwd=0.2) +
theme_map +
coord_sf(xlim = c(map_lims["xmin"], map_lims["xmax"]), ylim = c(map_lims["ymin"], map_lims["ymax"]))
travel_time_sf %>% filter(year == 2017, month == 1, week == 4) %>%
ggplot() +
geom_sf(mapping = aes(fill = mean_travel_time), lwd=0.2) +
geom_sf(data = dc_roads, color = "white", lwd=0.2) +
geom_sf(data = metro_line, color = "black", lwd=0.2) +
theme_map +
coord_sf(xlim = c(map_lims["xmin"], map_lims["xmax"]), ylim = c(map_lims["ymin"], map_lims["ymax"])) +
scale_fill_viridis_c(direction = -1)
travel_time_sf %>% filter(year == 2017, month == 1, week == 3) %>%
ggplot() +
geom_sf(mapping = aes(fill = med_incomeE)) +
theme_map +
scale_fill_viridis_c()
travel_time_sf %>% filter(year == 2017, month == 1, week == 3) %>%
ggplot() +
geom_sf(mapping = aes(fill = blackE)) +
theme_map +
scale_fill_viridis_c()
travel_time_sf %>% filter(year == 2017, month == 1, week == 3) %>%
ggplot() +
geom_sf(mapping = aes(fill = car_transitE)) +
theme_map +
scale_fill_viridis_c()
dc_acs_tracts$centroids <- st_centroid(st_geometry(dc_acs_tracts), of_largest_polygon)
plot(st_geometry(dc_acs_tracts), border="grey")
plot(dc_acs_tracts$centroids, add=TRUE, col="blue", cex = 0.3)
knit_with_parameters('~/Desktop/school/math494/transit_urban_mobility/manuscript.Rmd')
travel_time_sf
travel_time
travel_times
travel_times_census_join
travel_times_census_join %>% View()
